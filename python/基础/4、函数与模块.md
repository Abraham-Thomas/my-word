### 函数与模块

函数是实现具有特定功能的代码，隐藏实现细节，重用代码，提高可读性，便于调试

模块就是程序，一个.py文件可以是一个模块，它的名称就是不含.py后缀的文件名。可维护性更强，代码重用

**模块导入**

import os

定位：当前包 ---> 内置函数 ---> sys.path(环境变量)

**模块的属性**

dir，列出对象的所有属性和方法。用法：dir(模块名)

\__doc__，模块的注释，它是内置的属性。以双下划线开头的都是内置的属性或方法。

用法：模块名.\__doc__，下同。

\__name__，模块的名称。

\__file__，文件的全路径。

help，查看类或者方法的帮助信息。用法：help(模块名)



### 包

**解决重名的问题**

类似文件夹，文件夹里面还可以有文件夹，也可以有文件。同样，包里面可以有包，还可以有模块。所以，可以把包理解成**包含其他模块的模块**。

当然，每一个包下面必须有一个\__init__.py的文件

**\__init__.py的作用**

- 标志该目录为包
- 导入包实际上是导入它的\__init__.py（重点理解）
- 一般为空，可以批量导入所需的模块

**包的引用**

import 顺序：1、标准库；2、第三方库包；自定义模块/包

1. 引入整个包：import packageName
2. 只引入所需要的属性和方法：from packageName.xx.xx import xx
3. 指定别名：from packageName.xx.xx from xx as rename（避免重名）
4. 引入所有：from packageName.xx.xx import *(不推荐)

可以全局引入，就是在.py文件的顶部进行引入

局部引入，在函数或者方法中引入。



### os模块（标准模块）

python官方提供的模块

os.environ，包含环境变量的映射

os.system(command)，在子shell中执行操作系统命令

os.sep，路径中使用的分隔符，windows下是双反斜杠，Linux下是单斜杠

os.pathsep，分隔不同路径的分隔符

os.linesep，行分隔符（'\n'，'\r'或'\r\n'）

os.urandom(n)，返回n个字节的强加密随机数据

os.getcwd()，返回当前所在的目录

还有很多属性......

**os.path**

文件目录相关操作

os.path.isdir('name')，判断是否为文件夹

os.path.exists('name')，是否存在该目录



还有很多操作......



### DateTime模块（标准模块）

from datetime import datetime，datetime里面还有个datetime

datetime.now()，获取当前日期和时间

from time import time

time()，得到毫秒数，从1970年开始计算

还有很多......



### 第三方模块

Django，flask。

pip install module



### 虚拟环境

各个虚拟环境独立

只属于一个项目所用的包和依赖

**virtualenv**

pip install virtualenv

创建：

1. mkdir envs，用来保存寻你环境的目录，一般在c盘的根目录。
2. 进入envs，virtualenv flaskenv，表示创建flaskenv的虚拟环境。
3. 进入此虚拟环境cd Scripts，执行activate，激活虚拟环境，目录前会出现括号虚拟环境名字。
4. pip install flask，在虚拟环境中安装最新版flask库。
5. 在Scripts目录下执行deactivate.bat，退出当前虚拟环境。

workon flaskenv，可以直接进入到名为flaskenv的虚拟环境，如果没有名为xxx的虚拟环境，则会提示virtualenv "xxx" does not exist. Create it with "mkvirtualenv "

**virtualenvwrapper-win**

目前只支持到3.4

IDE中可以创建也可以导入虚拟环境



**pipenv**

新一代项目环境与依赖管理工具，可以把它看做是pip和virtualenv的组合体

[具体介绍](https://zhuanlan.zhihu.com/p/37581807)

pip isntall pipenv

由于版本更新，pipenv最低支持python2.7。

1. 创建目录，可以在之前的envs中，mkdir pydemo
2. 进入该目录，下载对应版本的python，如pipenv --python3.4
3. 下载对应的第三方库，pipenv install flask
4. 进入该虚拟环境， pipenv shell，目录前会出现括号虚拟环境名字

pipenv --help，查看一些操作。

**删除虚拟环境**

直接删除虚拟环境所在目录即可。



### 项目交接

场景：确保共享的项目能够在其他电脑上正常运行
 解决：

1. 方案一：

- 连同虚拟环境和项目一起拷贝给他人

1. 方案二：

- 在虚拟环境中，冻结依赖需求文本
- 把项目和依赖需求文本给他人
- 他人在本地创建一个新的虚拟环境，并根据依赖需求文本安装相关库



### 高阶函数

**lambda**是一种表达式，创建内嵌的简单匿名函数

**filter**，返回一个filter对象，其中包含对其执行函数时结果为真的所有元素，过滤器的作用，用法：

filter(func, seq)

```python

def use_filter():
    l = [1,2,32,5,7,4,8,9]
    # 找到数组中的奇数
    rest = filter(lambda n: n % 2 != 0, l)
    print(list(rest))
```

**map**，创建一个列表，其中包含对指定序列包含的项执行指定函数返回的值。

**reduce**，使用指定的函数将序列的前两个元素合二为一，再将结果与第三个元素合二为一，以此类推，直到处理完整整个序列得到一个完整的结果。

reduce(func, seq[, initial])



### 文件读写

r，读取模式（默认）

w，写入模式

x，独占写入模式

a，附加模式

b，二进制模式（与其他模式结合）

t，文本模式（默认值，与其他模式结合）

+，读写模式（与其他模式结合）

open()，打开文件。help(open)，可以查看该方法有哪些参数

close()，关闭文件。

**with语法**，上下文管理器。

```python
with open("somefile.txt") as f:
	do_something(f)
// 到达该语句末尾时将自动关闭文件，即便出现异常也是如此。
```

