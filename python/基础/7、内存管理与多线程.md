### 内存分析

id(变量)，获取变量在内存中的位置

is，判断两个变量的内存地址是否相同



### 垃圾回收

满足特定条件，自动启动垃圾回收

当python运行时，会记录其中分配对象（object allocation）和取消分配对象（object dealocation）的次数

当两者的差值高于某个阙值时，垃圾回收才会启动，查看阙值：gc.get_threshold()

**分代回收**

python将所有的对象分为0,1,2代，所有新建对象都是0代，当某一代对象经历过垃圾回收后依然存活，那么它就会被归入下一代对象。

**手动回收**

gc.collect()手动回收

objgraph模块中的count()记录当前类产生的实例对象的个数



### 内存管理机制

python3中的管理机制——Pymalloc

针对小对象（<=512bytes），pymalloc会在内存池当中申请内存空间。当大于512bytes，PyMem_RawMalloc()和PyMem_RawRealloc()来申请新的内存空间。



### 进程

执行中的程序，每个进程都拥有自己的地址空间、内存、数据栈以及其他用于跟踪执行的辅助数据。

**线程：**在同一个进程下执行，并共享相同的上下文。一个进程中的各个线程与主线程共享同一片数据空间，一般以并发的方式执行（**不完全等同于并行处理，**并行只是并发问题的可能方法之一，如果两个时间互不影响，则两个事件是并发的）。

线程包括开始、执行顺序和结束三部分，它可以被抢占（中断）和临时挂起（睡眠）——让步。

**多核及GIL**

在单核cpu系统中，不存在真正的并发。

GIL——全局解释器锁。它只是强制任何时候只有一个线程可以执行python代码

